<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2b1810">
    <title>Life RPG - Character Sheet</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="icon-192.png">
</head>
<body>
    <div class="app-container">
        <!-- Navigation -->
        <nav class="main-nav">
            <button class="nav-btn active" data-view="character">Character</button>
            <button class="nav-btn" data-view="quests">Quests</button>
            <button class="nav-btn" data-view="paths">Paths</button>
            <button class="nav-btn" data-view="challenges">Challenges</button>
            <button class="nav-btn" data-view="collection">ğŸ“¸</button>
            <button class="nav-btn" data-view="achievements">ğŸ†</button>
            <button class="nav-btn" data-view="settings">âš™ï¸</button>
        </nav>

        <!-- Character Sheet View -->
        <div id="character-view" class="view active">
            <div class="character-header">
                <h1>Quest Log: IRL</h1>
                <div class="total-level">Total Level: <span id="total-level">6</span></div>
                <div class="daily-progress">Today's XP: <span id="daily-xp">0</span></div>
            </div>

            <div class="skills-container">
                <div class="skill-card" data-skill="athleticism">
                    <div class="skill-icon">ğŸ’ª</div>
                    <div class="skill-info">
                        <h3>Athleticism</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>

                <div class="skill-card" data-skill="culinary">
                    <div class="skill-icon">ğŸ³</div>
                    <div class="skill-info">
                        <h3>Culinary Arts</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>

                <div class="skill-card" data-skill="artistry">
                    <div class="skill-icon">ğŸ¨</div>
                    <div class="skill-info">
                        <h3>Artistry</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>

                <div class="skill-card" data-skill="business">
                    <div class="skill-icon">ğŸ’¼</div>
                    <div class="skill-info">
                        <h3>Business Mind</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>

                <div class="skill-card" data-skill="partnership">
                    <div class="skill-icon">ğŸ’•</div>
                    <div class="skill-info">
                        <h3>Partnership</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>

                <div class="skill-card" data-skill="friendships">
                    <div class="skill-icon">ğŸ‘¯</div>
                    <div class="skill-info">
                        <h3>Friendships</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>

                <div class="skill-card" data-skill="innerPeace">
                    <div class="skill-icon">ğŸ§˜</div>
                    <div class="skill-info">
                        <h3>Inner Peace</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>

                <div class="skill-card" data-skill="homeCraft">
                    <div class="skill-icon">ğŸ </div>
                    <div class="skill-info">
                        <h3>Home Craft</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>

                <div class="skill-card" data-skill="generosity">
                    <div class="skill-icon">ğŸ¤</div>
                    <div class="skill-info">
                        <h3>Generosity</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>

                <div class="skill-card" data-skill="influence">
                    <div class="skill-icon">ğŸ“¸</div>
                    <div class="skill-info">
                        <h3>Influence</h3>
                        <div class="skill-level">Level <span class="level-num">1</span></div>
                        <div class="xp-bar">
                            <div class="xp-fill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text"><span class="current-xp">0</span> / <span class="next-level-xp">83</span> XP</div>
                        <div class="streak-info">ğŸ”¥ <span class="streak-days">0</span> day streak</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quests View -->
        <div id="quests-view" class="view">
            <div class="view-header">
                <h2>Quest Log</h2>
                <button class="primary-btn" onclick="app.openAddQuestModal()">+ Custom Quest</button>
            </div>

            <div class="filter-section">
                <h3 class="filter-label">Type:</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter-type="all">All</button>
                    <button class="filter-btn" data-filter-type="daily">Daily</button>
                    <button class="filter-btn" data-filter-type="weekly">Weekly</button>
                    <button class="filter-btn" data-filter-type="monthly">Monthly</button>
                    <button class="filter-btn" data-filter-type="as-needed">As Needed</button>
                    <button class="filter-btn" data-filter-type="one-time">One-Time</button>
                </div>
            </div>

            <div class="filter-section">
                <h3 class="filter-label">Path:</h3>
                <div class="filter-buttons path-filters">
                    <button class="filter-btn active" data-filter-path="all">All</button>
                    <button class="filter-btn" data-filter-path="entrepreneur">ğŸš€</button>
                    <button class="filter-btn" data-filter-path="culinary-master">ğŸ³</button>
                    <button class="filter-btn" data-filter-path="artistic-visionary">ğŸ¨</button>
                    <button class="filter-btn" data-filter-path="lifestyle-influencer">ğŸ“¸</button>
                    <button class="filter-btn" data-filter-path="fitness-goddess">ğŸ’ª</button>
                    <button class="filter-btn" data-filter-path="lover-girl">ğŸ’•</button>
                    <button class="filter-btn" data-filter-path="soul-work">ğŸ§˜</button>
                    <button class="filter-btn" data-filter-path="living-saint">ğŸ¤</button>
                    <button class="filter-btn" data-filter-path="secret-garden">ğŸŒ¿</button>
                    <button class="filter-btn" data-filter-path="none">âˆ…</button>
                </div>
            </div>

            <div id="quests-container" class="quests-grid"></div>
        </div>

        <!-- Paths View (Dynamic) -->
        <div id="paths-view" class="view">
            <div class="view-header">
                <h2>Life Paths</h2>
                <p class="view-subtitle">Your journey through 9 areas of life mastery</p>
            </div>

            <div id="paths-container" class="paths-grid"></div>
        </div>

        <!-- Challenges View -->
        <div id="challenges-view" class="view">
            <div class="view-header">
                <h2>Active Challenges</h2>
                <button class="primary-btn" onclick="app.openAddChallengeModal()">+ New Challenge</button>
            </div>

            <div id="challenges-container"></div>
        </div>

        <!-- Achievements View -->
        <div id="achievements-view" class="view">
            <div class="view-header">
                <h2>Achievement Diaries</h2>
            </div>

            <div id="achievements-container" class="achievements-list"></div>
        </div>

        <!-- Collection Log View -->
        <div id="collection-view" class="view">
            <div class="view-header">
                <h2>Collection Log</h2>
                <button class="primary-btn" onclick="app.openAddCollectionModal()">+ Add Experience</button>
            </div>

            <div id="collection-stats" class="stats-row"></div>

            <div class="filter-section">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-collection-filter="all" onclick="app.filterCollectionByStatus('all')">All</button>
                    <button class="filter-btn" data-collection-filter="incomplete" onclick="app.filterCollectionByStatus('incomplete')">To Do</button>
                    <button class="filter-btn" data-collection-filter="completed" onclick="app.filterCollectionByStatus('completed')">Completed</button>
                </div>
            </div>

            <div class="filter-section">
                <h3 class="filter-label">Tags:</h3>
                <div id="collection-tag-filters" class="filter-buttons"></div>
            </div>

            <div id="collection-log-container" class="collection-grid"></div>

            <div class="view-divider">
                <h3>ğŸ“¸ Photo Gallery</h3>
            </div>

            <div class="filter-section">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-gallery-source="all" onclick="app.filterGalleryBySource('all')">All</button>
                    <button class="filter-btn" data-gallery-source="quest" onclick="app.filterGalleryBySource('quest')">âš”ï¸ Quests</button>
                    <button class="filter-btn" data-gallery-source="collection" onclick="app.filterGalleryBySource('collection')">ğŸ“¸ Collection</button>
                </div>
                <span id="gallery-stats" class="gallery-stats"></span>
            </div>

            <div id="photo-gallery-container" class="photo-grid"></div>
        </div>

        <!-- Settings View -->
        <div id="settings-view" class="view">
            <div class="view-header">
                <h2>Settings</h2>
            </div>

            <div class="settings-section">
                <h3>Data Management</h3>
                <div class="settings-buttons">
                    <button class="secondary-btn" onclick="app.exportData()">ğŸ“¤ Export Data</button>
                    <label class="secondary-btn">
                        ğŸ“¥ Import Data
                        <input type="file" accept=".json" onchange="app.importData(this.files[0])" style="display: none;">
                    </label>
                    <button class="danger-btn" onclick="app.resetAllData()">ğŸ—‘ï¸ Reset All Data</button>
                </div>
            </div>

            <div class="settings-section">
                <h3>About</h3>
                <p>Life RPG v2.0 - OSRS-inspired life gamification</p>
                <p>Data is stored locally in your browser.</p>
            </div>
        </div>
    </div>

    <!-- Level Up Modal -->
    <div id="level-up-modal" class="modal">
        <div class="modal-content level-up-content">
            <div class="level-up-banner">LEVEL UP!</div>
            <div id="level-up-text"></div>
            <button class="primary-btn" onclick="closeLevelUpModal()">Nice!</button>
        </div>
    </div>

    <!-- Achievement Modal -->
    <div id="achievement-modal" class="modal">
        <div class="modal-content achievement-content">
            <div class="achievement-banner">ACHIEVEMENT UNLOCKED!</div>
            <div id="achievement-text"></div>
            <button class="primary-btn" onclick="closeAchievementModal()">Awesome!</button>
        </div>
    </div>

    <!-- Add Quest Modal -->
    <div id="add-quest-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Custom Quest</h2>
                <button class="modal-close" onclick="closeAddQuestModal()">Ã—</button>
            </div>
            <form id="add-quest-form">
                <div class="form-group">
                    <label for="new-quest-name">Quest Name</label>
                    <input type="text" id="new-quest-name" required placeholder="What do you want to accomplish?">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="new-quest-frequency">Frequency</label>
                        <select id="new-quest-frequency">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="as-needed">As Needed</option>
                            <option value="one-time">One-Time</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="new-quest-skill">Primary Skill</label>
                        <select id="new-quest-skill">
                            <option value="athleticism">ğŸ’ª Athleticism</option>
                            <option value="culinary">ğŸ³ Culinary Arts</option>
                            <option value="artistry">ğŸ¨ Artistry</option>
                            <option value="business">ğŸ’¼ Business Mind</option>
                            <option value="partnership">ğŸ’• Partnership</option>
                            <option value="friendships">ğŸ‘¯ Friendships</option>
                            <option value="innerPeace">ğŸ§˜ Inner Peace</option>
                            <option value="homeCraft">ğŸ  Home Craft</option>
                            <option value="generosity">ğŸ¤ Generosity</option>
                            <option value="influence">ğŸ“¸ Influence</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="new-quest-xp">XP Reward</label>
                        <input type="number" id="new-quest-xp" value="25" min="1" max="500">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="secondary-btn" onclick="closeAddQuestModal()">Cancel</button>
                    <button type="submit" class="primary-btn">Create Quest</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Quest Modal -->
    <div id="edit-quest-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Quest</h2>
                <button class="modal-close" onclick="closeEditQuestModal()">Ã—</button>
            </div>
            <form id="edit-quest-form">
                <div class="form-group">
                    <label for="edit-quest-name">Quest Name</label>
                    <input type="text" id="edit-quest-name" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-quest-frequency">Frequency</label>
                        <select id="edit-quest-frequency">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="as-needed">As Needed</option>
                            <option value="one-time">One-Time</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-quest-skill">Primary Skill</label>
                        <select id="edit-quest-skill">
                            <option value="athleticism">ğŸ’ª Athleticism</option>
                            <option value="culinary">ğŸ³ Culinary Arts</option>
                            <option value="artistry">ğŸ¨ Artistry</option>
                            <option value="business">ğŸ’¼ Business Mind</option>
                            <option value="partnership">ğŸ’• Partnership</option>
                            <option value="friendships">ğŸ‘¯ Friendships</option>
                            <option value="innerPeace">ğŸ§˜ Inner Peace</option>
                            <option value="homeCraft">ğŸ  Home Craft</option>
                            <option value="generosity">ğŸ¤ Generosity</option>
                            <option value="influence">ğŸ“¸ Influence</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-quest-xp">XP Reward</label>
                        <input type="number" id="edit-quest-xp" min="1" max="500">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="secondary-btn" onclick="closeEditQuestModal()">Cancel</button>
                    <button type="submit" class="primary-btn">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Challenge Modal -->
    <div id="add-challenge-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Start a Challenge</h2>
                <button class="modal-close" onclick="closeAddChallengeModal()">Ã—</button>
            </div>
            
            <div class="challenge-templates">
                <h3>Challenge Templates</h3>
                
                <div class="template-card" data-challenge-template="75-hard">
                    <div class="template-icon">âš”ï¸</div>
                    <div class="template-info">
                        <h4>75 Hard</h4>
                        <p>7 daily tasks for 75 consecutive days</p>
                    </div>
                </div>
                
                <div class="template-card" data-challenge-template="movie-date">
                    <div class="template-icon">ğŸ¬</div>
                    <div class="template-info">
                        <h4>Movie Date with Scott</h4>
                        <p>Bi-weekly movie dates</p>
                    </div>
                </div>
                
                <div class="template-card" data-challenge-template="monthly-craft">
                    <div class="template-icon">ğŸ“Œ</div>
                    <div class="template-info">
                        <h4>Monthly Craft Project</h4>
                        <p>Complete one craft per month</p>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="secondary-btn" onclick="closeAddChallengeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Collection Entry Modal -->
    <div id="add-collection-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add to Collection Log</h2>
                <button class="modal-close" onclick="app.closeModal('add-collection-modal')">Ã—</button>
            </div>
            <form id="add-collection-form" onsubmit="event.preventDefault(); app.saveCollectionEntry();">
                <div class="form-group">
                    <label for="new-collection-name">Experience Name *</label>
                    <input type="text" id="new-collection-name" required placeholder="Concert, Trip, Milestone...">
                </div>
                
                <div class="form-group">
                    <label for="new-collection-description">Description</label>
                    <textarea id="new-collection-description" rows="2" placeholder="Optional details..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="new-collection-tags">Tags (comma separated)</label>
                        <input type="text" id="new-collection-tags" placeholder="travel, music, milestone">
                    </div>
                    
                    <div class="form-group">
                        <label for="new-collection-date">Target Date</label>
                        <input type="date" id="new-collection-date">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="secondary-btn" onclick="app.closeModal('add-collection-modal')">Cancel</button>
                    <button type="submit" class="primary-btn">Add Entry</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Complete Collection Entry Modal -->
    <div id="complete-collection-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Complete: <span id="complete-collection-name"></span></h2>
                <button class="modal-close" onclick="app.closeModal('complete-collection-modal')">Ã—</button>
            </div>
            <div class="form-group">
                <label>Add Photo *</label>
                <input type="file" id="collection-photo-input" accept="image/*" onchange="app.handleCollectionPhotoSelect(this)">
                <div id="collection-photo-preview" class="photo-preview"></div>
            </div>
            
            <div class="form-group">
                <label for="collection-photo-caption">Caption</label>
                <input type="text" id="collection-photo-caption" placeholder="Optional caption...">
            </div>
            
            <div class="form-actions">
                <button type="button" class="secondary-btn" onclick="app.closeModal('complete-collection-modal')">Cancel</button>
                <button type="button" class="primary-btn" onclick="app.submitCollectionCompletion()">Complete!</button>
            </div>
        </div>
    </div>

    <!-- Edit Collection Entry Modal -->
    <div id="edit-collection-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Entry</h2>
                <button class="modal-close" onclick="app.closeModal('edit-collection-modal')">Ã—</button>
            </div>
            <form id="edit-collection-form" onsubmit="event.preventDefault(); app.saveEditedCollectionEntry();">
                <div class="form-group">
                    <label for="edit-collection-name">Experience Name *</label>
                    <input type="text" id="edit-collection-name" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-collection-description">Description</label>
                    <textarea id="edit-collection-description" rows="2"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-collection-tags">Tags (comma separated)</label>
                        <input type="text" id="edit-collection-tags">
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-collection-date">Target Date</label>
                        <input type="date" id="edit-collection-date">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="secondary-btn" onclick="app.closeModal('edit-collection-modal')">Cancel</button>
                    <button type="submit" class="primary-btn">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quest Photo Modal -->
    <div id="quest-photo-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Complete: <span id="quest-photo-name"></span></h2>
                <button class="modal-close" onclick="app.closeModal('quest-photo-modal')">Ã—</button>
            </div>
            <div class="form-group">
                <label>Add Photo (optional)</label>
                <input type="file" id="quest-photo-input" accept="image/*" onchange="app.handleQuestPhotoSelect(this)">
                <div id="quest-photo-preview" class="photo-preview"></div>
            </div>
            
            <div class="form-group">
                <label for="quest-photo-caption">Caption</label>
                <input type="text" id="quest-photo-caption" placeholder="Optional caption...">
            </div>
            
            <div class="form-actions">
                <button type="button" class="secondary-btn" onclick="app.closeModal('quest-photo-modal')">Cancel</button>
                <button type="button" class="primary-btn" onclick="app.submitQuestWithPhoto()">Complete Quest!</button>
            </div>
        </div>
    </div>

    <!-- Photo Lightbox Modal -->
    <div id="photo-lightbox-modal" class="modal lightbox-modal">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="app.closeModal('photo-lightbox-modal')">Ã—</button>
            <img id="lightbox-image" src="" alt="Photo">
            <div class="lightbox-info">
                <span id="lightbox-source"></span>
                <p id="lightbox-caption"></p>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script src="app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker registration failed'));
        }
    </script>
</body>
</html>
